!function(t){"use strict";var n=function(t,n){return Math.floor(Math.random()*n)+t},a=function(t){return t.match(/(-?[0-9\.]+)/g)},s="pos",o=.7,e=100;t.fn.setCloud=function(n,a){if(n&&a)switch(s){case"bg":return t(this).css({"background-position":n+"px "+a+"px"});case"pos":return t(this).css({left:n,top:a});case"transit":return t(this).stop().transition({x:n,y:a},"cubic-bezier(0,.99,.36,.99)")}},t.fn.updateCloud=function(n,a){var s=t(this),e=parseInt(s.data("size")),i={x:parseInt(s.data("x")),y:parseInt(s.data("y"))},c={x:i.x+n/(8-e),y:i.y+a/(8-e)},r=s.getPos(),d={x:r.x+(c.x-r.x)*o,y:r.y+(c.y-r.y)*o};s.setCloud(d.x,d.y)},t.fn.getPos=function(){var n=t(this);switch(s){case"bg":return{x:parseInt(n.css("background-position-x")),y:parseInt(n.css("background-position-y"))};case"pos":return{x:parseInt(n.css("left")),y:parseInt(n.css("top"))};case"transit":var o=a(n.css("transform")),e={x:parseInt(o[4]),y:parseInt(o[5])};return e}};var i=function(){var a={w:t(window).width(),h:t(window).height(),cX:t(window).width()/2,cY:t(window).height()/2},o=function(s){var o=s/7,e={x:n(-a.cX/2,a.w+a.cX/2),y:n(a.cY-100-100*(1-o),a.cY+200*o)},i=t("<div/>").addClass("cloud-scale").addClass("c-"+s).appendTo(".fallback-clouds"),c=t("<div/>",{"data-size":s,"data-x":e.x,"data-y":e.y}).addClass("cloud").addClass("c-"+s).appendTo(i);c.setCloud(e.x,e.y)},i=function(){t(".cloud").remove();for(var n=0;e>n;n++){var a=n/e,s=Math.floor(7*(1-a*a*a)+.99);o(s)}};i(),t(window).resize(function(){a={w:t(window).width(),h:t(window).height(),cX:t(window).width()/2,cY:t(window).height()/2},i()});var c={x:a.cX,y:a.cY},r=function(){t(".cloud").each(function(){var n=t(this);n.updateCloud(c.x,c.y)})};t(window).on("mousemove",function(n){c={x:.5*(a.cX-n.pageX),y:.2*(a.cY-n.pageY)},"transit"==s?t(".cloud").each(function(){var n=t(this);n.updateCloud(c.x,c.y)}):r()})};t(function(){var n=navigator.userAgent.match(/iPhone|iPad|iPod/i);if(t("body").hasClass("no-webgl")&&!n){var a=document.createElement("script");a.onload=function(){i()},a.src="js/jquery.transit.js",document.head.appendChild(a)}else t("body").hasClass("no-webgl")&&(s="pos",i())})}(jQuery);